## ros2_control: controller manager



## Взаимодействие с диспетчером контроллеров

Внутри launch-файла запускается диспетчер контроллеров (его можно запустить и отдельно)

```bash
cd ~/ros2_ws && colcon build && source install/setup.bash
ros2 launch my_robot_bringup my_robot.launch.py
```

Вывести доступные типы контроллеров

```bash
ros2 control list_controller_types
```

вывести активные контроллеры
```bash
ros2 control list_controllers
```
активные контроллеры могут управлять роботом

остановка контроллеров:

```bash
ros2 control set_controller_state forward_position_controller inactive
```

```bash
ros2 control set_controller_state joint_state_broadcaster inactive
```

загрузка/выгрузка контроллеров (после выгрузки они исчезают из списка lists_controllers)
```bash
ros2 control unload_controller forward_position_controller
```

контроллер можно загрузить, но он будет несконфигурированным
```bash
ros2 control load_controller joint_state_broadcaster
```

Несконфигурированный контроллер не публикует данные в топики
```bash
ros2 control set_controller_state joint_state_broadcaster configure
```
ROS2 Humble:
```bash
ros2 control load_controller forward_position_controller --set-state configured
```
## Взаимодействие с контроллерами с помощью сервисов

```bash
ros2 service list | grep controller_manager
```


```bash
ros2 service call /controller_manager/list_controllers controller_manager_msgs/srv/ListControllers

```

## Полезные ссылки
Controller Manager
https://control.ros.org/master/doc/ros2_control/controller_manager/doc/userdoc.html


ros2_control_bolt
https://gitlab.laas.fr/prouanet/ros2_control_bolt

ros2_control_demos
https://github.com/ros-controls/ros2_control_demos